table_name: Latest apds_demandspacetype expiry
main_dttm_col: null
description: null
default_endpoint: null
offset: 0
cache_timeout: null
schema: default
sql: "SELECT \"demandTable.demandSpaceType.elementId\",\r\n  \"demandTable.demandSpaceType.detectionUpdateTime\"\
  ,\r\n  if(\"demandTable.demandSpaceType.detectionUpdateTime\" > \"payment.paymentAssignment.assignedRight.plannedUse.estimatedEnd\"\
  , 'expired', 'not expired') as isExpired\r\nFROM apds_demandspacetype\r\nWHERE\r\
  \n  (\"demandTable.demandSpaceType.elementId\", \"demandTable.demandSpaceType.detectionUpdateTime\"\
  ) IN (\r\n    SELECT\r\n      \"demandTable.demandSpaceType.elementId\",\r\n   \
  \  MAX(\"demandTable.demandSpaceType.detectionUpdateTime\") AS \"latestEventTimestamp\"\
  \r\n    FROM\r\n      \"apds_demandspacetype\"\r\n    GROUP BY\r\n      \"demandTable.demandSpaceType.elementId\"\
  \r\n      )\r\n    AND\r\n    \"payment.paymentAssignment.assignedRight.id\" IS\
  \ NOT NULL\r\n    AND\r\n    \"session.actualEnd\" IS NULL\r\nGROUP BY 1, 2, 3"
params: null
template_params: null
filter_select_enabled: true
fetch_values_predicate: null
extra: null
normalize_columns: false
always_filter_main_dttm: false
uuid: c0474cc0-ed32-4dbb-ad1e-e7214f6c7218
metrics:
- metric_name: count
  verbose_name: Total
  metric_type: count
  expression: COUNT(*)
  description: ''
  d3format: null
  currency: null
  extra:
    warning_markdown: ''
  warning_text: null
columns:
- column_name: demandTable.demandSpaceType.detectionUpdateTime
  verbose_name: null
  is_dttm: true
  is_active: true
  type: Nullable(DateTime64(6))
  advanced_data_type: null
  groupby: true
  filterable: true
  expression: null
  description: null
  python_date_format: null
  extra:
    warning_markdown: null
- column_name: demandTable.demandSpaceType.elementId
  verbose_name: null
  is_dttm: false
  is_active: true
  type: String
  advanced_data_type: null
  groupby: true
  filterable: true
  expression: null
  description: null
  python_date_format: null
  extra:
    warning_markdown: null
- column_name: isExpired
  verbose_name: null
  is_dttm: false
  is_active: true
  type: String
  advanced_data_type: null
  groupby: true
  filterable: true
  expression: null
  description: null
  python_date_format: null
  extra:
    warning_markdown: null
version: 1.0.0
database_uuid: b766e254-dee3-457b-b5c5-cd24f90651ce
